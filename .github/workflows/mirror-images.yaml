name: Mirror pre-requisite images for Shipwright samples

on:
  schedule:
  - cron: '0 0 * * *'
  workflow_dispatch:  # Manual trigger

jobs:
  build:
    if: ${{ github.repository == 'shipwright-io/build' }}
    runs-on: ubuntu-latest

    steps:
      - uses: imjasonh/setup-crane@01d26682810dcd47bfc8eb1efe791558123a9373

      - name: Mirror images
        env:
          REPO: ghcr.io/${{ github.repository_owner }}/shipwright-samples
        run: |
          for img in \
            golang:1.16 \
            maven:3-jdk-8-openj9 \
            node:12 \
            open-liberty:kernel-java8-openj9-ubi \
            ; do

            crane cp ${img} ${REPO}/${img}
          done
